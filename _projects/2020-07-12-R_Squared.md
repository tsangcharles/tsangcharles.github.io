---
layout: page
title: R Squared
description: Why you should not use R Squared for machine learning
importance: 1
img: /assets/img/R_Squared/SVR.png
category: data-science
---


I first learned about $$R^2$$ back in my first course in statistics in University. To be honest I did not have a good grasp of it for the longest time; I knew the definition of $$R^2$$, and simple properties such as how it monotonically increases as you add regressors. My knowledge of $$R^2$$ was stuck there and did not advance.

Years after, I started picking up some Machine Learning. One would notice that Machine Learning is very similar to statistics (the scope of similarity is beyond the scope of this blog post), and the similarity made me question why some concepts of statistics did not translate to machine learning. In particular, what about coefficient of determination, $$R^2$$?

### Why is $$R^2$$ so important in context of linear regression?

$$R^2$$ is a widely understood model performance metric in the context of linear regression. To see this, let us define three important sum of squares:

$$SSE = \sum_{i=1}^{n} (y_i - \hat{y_i})^2$$

$$SSR = \sum_{i=1}^{n} (\hat{y_i} - \bar{y_i})^2$$

$$SST = \sum_{i=1}^{n} (y_i - \bar{y_i})^2$$

A key property (proof omitted) in **linear regression** is that $$SSR + SSE = SST$$, meaning $$SST$$ can be decomposed to two different parts, regression sum of squares $$SSR$$ and error sum of squares $$SSE$$. This property allows us to define $$R^2$$ to be $$\frac{SSR}{SST}$$, which can be interpreted as the percentage of variations in response variable which is explained by variations of the regressors. The closer to 1, the better.

### Why don't we use $$R^2$$ in machine learning to assess model performance?

The simple answer is that $$SSR + SSE = SST$$ does not necessarily hold anymore when model is **non-linear**, and that if $$R^2$$ continues to be defined by $$\frac{SSR}{SST}$$, it would not be very useful and we do not get that nice interpretation about variations anymore. The frustrating part is that I read many websites about this and this was ultimately hand-waved without any examples. As a result I came up with a quick example on a Saturday afternoon:

<div class="row justify-content-sm-center">
    <div class="col-sm-8 mt-3 mt-md-0">
        {% include figure.html path="assets/img/R_Squared/SVR.png" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
</div>

I used the support vector regression package in Python and observed that $$SST = 22 > 15.07 = SSE + SSR$$. More details can be found on my github repo.



Every project has a beautiful feature showcase page.
It's easy to include images in a flexible 3-column grid format.
Make your photos 1/3, 2/3, or full width.

To give your project a background in the portfolio page, just add the img tag to the front matter like so:

    ---
    layout: page
    title: project
    description: a project with a background image
    img: /assets/img/12.jpg
    ---

<div class="row">
    <div class="col-sm mt-3 mt-md-0">
        {% include figure.html path="assets/img/1.jpg" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
    <div class="col-sm mt-3 mt-md-0">
        {% include figure.html path="assets/img/3.jpg" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
    <div class="col-sm mt-3 mt-md-0">
        {% include figure.html path="assets/img/5.jpg" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
<div class="caption">
    Caption photos easily. On the left, a road goes through a tunnel. Middle, leaves artistically fall in a hipster photoshoot. Right, in another hipster photoshoot, a lumberjack grasps a handful of pine needles.
</div>
<div class="row">
    <div class="col-sm mt-3 mt-md-0">
        {% include figure.html path="assets/img/5.jpg" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
<div class="caption">
    This image can also have a caption. It's like magic.
</div>

You can also put regular text between your rows of images.
Say you wanted to write a little bit about your project before you posted the rest of the images.
You describe how you toiled, sweated, *bled* for your project, and then... you reveal its glory in the next row of images.


<div class="row justify-content-sm-center">
    <div class="col-sm-8 mt-3 mt-md-0">
        {% include figure.html path="assets/img/6.jpg" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
    <div class="col-sm-4 mt-3 mt-md-0">
        {% include figure.html path="assets/img/11.jpg" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
<div class="caption">
    You can also have artistically styled 2/3 + 1/3 images, like these.
</div>


The code is simple.
Just wrap your images with `<div class="col-sm">` and place them inside `<div class="row">` (read more about the <a href="https://getbootstrap.com/docs/4.4/layout/grid/">Bootstrap Grid</a> system).
To make images responsive, add `img-fluid` class to each; for rounded corners and shadows use `rounded` and `z-depth-1` classes.
Here's the code for the last row of images above:

{% raw %}
```html
<div class="row justify-content-sm-center">
    <div class="col-sm-8 mt-3 mt-md-0">
        {% include figure.html path="assets/R_Squared/SVR.png" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
    <div class="col-sm-4 mt-3 mt-md-0">
        {% include figure.html path="assets/img/11.jpg" title="example image" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
```
{% endraw %}


---
title: Why don't people use R^2 in Machine Learning?
date: "2020-07-12"
template: "post"
draft: false
slug: "/posts/r-squared/"
category: "Data Science"
tags:
  - "Data Science"
  - "Machine Learning"
description: "R^2 has problems extending beyond linear regression"
---
